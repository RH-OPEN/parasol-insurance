= Application Overview
include::_attributes.adoc[]

== アーキテクチャ

アプリケーションの簡略化されたアーキテクチャ図は次のとおりです。

[.bordershadow]
image::05/application-architecture.drawio.svg[]


さまざまなコンポーネントは次のとおりです。

- **frontend**: Patternfly フレームワーク (React、Typescript) を使用して開発されたアプリケーション自体で、ユーザーのブラウザーで実行されます。
- **backend**: {ocp} 上のコンテナーで実行される Python FastAPI アプリケーション。データベース、LLM、およびオブジェクト ストレージとの通信を処理します。REST API を公開することで、フロントエンドとの通信を処理します。
- **database**: {ocp} 上のコンテナーで実行される PostgreSQL データベース。Claim を保存します。
- The **LLM**: クレームから情報を要約および抽出し、チャットボットを強化するために使用される言語モデル。これは、API を通じてバックエンドによって使用されます。
- **VectorDB**: RAG 部分で検索するドキュメントを保存するために使用されるベクトル データベース。Milvus をベースにしています。
- **Object storage**: S3 互換のオブジェクト ストレージ。Claim 画像を保存します。

== アプリケーション コード

アプリケーションのコードを確認したい場合は、 {rhoai} から直接行うことができます。

- ブラウザーでまだ開いている可能性のあるさまざまな Jupyter タブを閉じます。
- {rhoai} ダッシュボードに戻ります。
- トグルを使用してワークベンチを停止します。

+
[.bordershadow]
image::05/05-toggle-off-workbench.png[]
[.bordershadow]
image::05/05-confirm-turn-off.png[]


- 完全に停止するには、おそらく 5 秒から 10 秒かかります。
- 右側にある 3 つの縦の点をクリックして **Edit workbench** ボタンを選択し、ワークベンチ構成を編集します。
+
[.bordershadow]
image::05/stop-workbench.png[]


- `image selection` セクションで、イメージを `CUSTOM - Code Server for {ic}` に変更します。
+
[.bordershadow]
image::05/05-change-to-vscode.png[]

- 次に、ページの下部にある「**Update workbench**」をクリックします。
+
[.bordershadow]
image::05/update-workbench.png[]

- トグルを使用してワークベンチを再度起動できるようになりました。
- ワークベンチが起動したら、**開く** リンクをクリックします。
- VSCode IDE にリダイレクトされます。（Code Server は VSCode のオープンソース実装です。）
- ログインして承認を受け入れると、VSCode が開きます。
- 初めて接続するときは、ワークスペースを信頼していることを示す必要があります。
- **Yes, I trust the authors** ボタンをクリックします。
+
[.bordershadow]
image::05/trust-vscode.png[]

* Welcome タブを閉じると、使い慣れた VSCode 環境に戻ります。
* 永続ボリュームは、この新しい環境に自動的に再接続されました。
** したがって、Jupyter 環境で作成したすべてのデータは引き続き利用できます。
** VSCode はデフォルトで隠しファイルを表示するため、より多くのファイルを表示できますが、Jupyter ではそうではありません。
* 必要に応じて、 `parasol-insurance/app` フォルダー内のアプリケーションのコードを調べることができます。
+
[.bordershadow]
image::05/app-code.png[]

もちろん、これは完全な VSCode 環境であるため、ローカルの VSCode インストールと同じ方法で構成できます。ワークベンチを停止して再起動したときに永続化される拡張機能をインストールしたり、独自のキーバインドを構成したりできます。

アプリケーションはすでにコンテナー イメージとして構築されており、GitOps を使用してデプロイする準備が整いました。次のセクションに進むことができます。
